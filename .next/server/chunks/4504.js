exports.id=4504,exports.ids=[4504],exports.modules={55175:e=>{e.exports={fileUploadContainer:"fileUpload_fileUploadContainer___BSo_",inputLabel:"fileUpload_inputLabel__i7LfU",dragDropText:"fileUpload_dragDropText__yaae1",uploadFileBtn:"fileUpload_uploadFileBtn__3Pcgs",formField:"fileUpload_formField__bJMTx",filePreviewContainer:"fileUpload_filePreviewContainer__t_9ez",previewList:"fileUpload_previewList__IRASR",previewContainer:"fileUpload_previewContainer__59vD4",previewItem:"fileUpload_previewItem__cRikd",imagePreview:"fileUpload_imagePreview__g3evF",removeFileIcon:"fileUpload_removeFileIcon__gAH7O"}},94504:(e,l,a)=>{"use strict";a.a(e,async(e,i)=>{try{a.r(l),a.d(l,{default:()=>__WEBPACK_DEFAULT_EXPORT__});var t=a(20997),r=a(46953),s=a(15625),n=a(99648),o=a(16689),d=a(3590),p=a(59010),c=a(55175),m=a.n(c),_=e([n,d]);[n,d]=_.then?(await _)():_;let __WEBPACK_DEFAULT_EXPORT__=({label:e,updateFilesCb:l,maxFileSizeInBytes:a,preSelectedFiles:i,resetCb:c,..._})=>{let f=(0,o.useRef)(null),[h,u]=(0,o.useState)(i||[]),[g,v]=(0,o.useState)("");(0,o.useEffect)(()=>{"reset"===c&&u([])},[c]);let addNewFilesLocal=async e=>{try{v("Uploading...");let l=new FormData;l.append("file",e);let a=await (0,n.default)({method:"post",url:"/api/fileupload/local",data:l,headers:{"Content-Type":"multipart/form-data"}}).then(e=>e.data);if(a.success)return v(""),{name:a.name,url:a.url};throw Error("Something Went Wrong "+a.err)}catch(e){v(e.message)}},callUpdateFilesCb=e=>{l(e)},handleNewFileUpload=async e=>{let{files:l}=e.target;if(l.length){if(l[0].size<=a){let e=await addNewFilesLocal(l[0]);e&&(_.multiple?(u([...h,e]),callUpdateFilesCb([...h,e])):(u([e]),callUpdateFilesCb([e])))}else d.toast.warning("File size is too large (Max 2mb)")}},removeFile=async e=>{try{v("Deleting...");let{success:l,err:a}=await (0,n.default)({method:"DELETE",url:`/api/fileupload/local?name=${e}`}).then(e=>e.data);if(l){let l=h.filter(l=>l.name!==e);u(l),callUpdateFilesCb(l)}else d.toast.error(a)}catch(e){console.log(e),d.toast.error(`Something Went Wrong - ${e.message}`)}v("")};return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsxs)("div",{className:m().fileUploadContainer,children:[t.jsx("label",{className:m().inputLabel,children:e}),t.jsx("p",{className:m().dragDropText,children:"Drag and drop your files anywhere or"}),(0,t.jsxs)("button",{className:m().uploadFileBtn,type:"button",onClick:()=>{f.current.click()},children:[t.jsx("div",{children:t.jsx(r.gq,{width:22,height:22})}),(0,t.jsxs)("span",{children:[" Upload ",_.multiple?"files":"a file"]})]}),t.jsx("input",{className:m().formField,type:"file",ref:f,onChange:handleNewFileUpload,title:"",value:"",..._})]}),g.length>0&&t.jsx("div",{className:"text-danger my-2",children:g}),(0,t.jsxs)("div",{className:m().filePreviewContainer,children:[t.jsx("span",{children:"To Upload"}),t.jsx("div",{className:m().previewList,children:h.map((e,l)=>t.jsx("div",{className:m().previewContainer,children:(0,t.jsxs)("div",{className:m().previewItem,children:[t.jsx(p.default,{className:m().imagePreview,src:e.url,alt:e.name,width:100,height:100}),t.jsx("aside",{children:t.jsx(s.rF,{width:18,height:18,className:m().removeFileIcon,onClick:()=>removeFile(e.name)})})]})},e.name+l))})]})]})};i()}catch(e){i(e)}})}};