exports.id=8231,exports.ids=[8231,8214,7290],exports.modules={48136:e=>{e.exports={card:"purchaseDetails_card__3OJXZ",close:"purchaseDetails_close__DVuQ7",review_button:"purchaseDetails_review_button___ocbt"}},64155:e=>{e.exports={star_rating:"ratingInput_star_rating__eT6ua",on:"ratingInput_on__L1rQk",off:"ratingInput_off__4TZPs"}},4859:e=>{e.exports={container:"spinner_container__Ce8dH",spinner:"spinner_spinner__eipLJ",spin:"spinner_spin__LDwbh"}},37508:e=>{e.exports={container:"table_container__f1mC4",button:"table_button__LF8_5",modal_icon:"table_modal_icon__t_aHR",danger_button:"table_danger_button__jpS_l",success_button:"table_success_button__lcGr5",color_viewer:"table_color_viewer__54oBu",search_bar:"table_search_bar__anNGy",search_bar_button:"table_search_bar_button__OjZ8a"}},7096:e=>{e.exports={top:"orderTrack_top__0tQv3",input:"orderTrack_input__Iewgj",body:"orderTrack_body__fbLiK",order_details:"orderTrack_order_details__I1bOq",payment_info:"orderTrack_payment_info__rK_3Q"}},27804:(e,s,t)=>{"use strict";t.a(e,async(e,a)=>{try{t.d(s,{Z:()=>PurchaseDetails});var r=t(20997),n=t(43896),d=t(5152),l=t.n(d),c=t(16689),i=t(6022),o=t(3590),u=t(2022),p=t(7096),h=t.n(p),m=t(76606),x=t(31161),_=t(48136),j=t.n(_),b=t(57987),v=t(62774),f=e([o,b,v]);function PurchaseDetails({data:e,hide:s,update:a}){let d=l()(()=>t.e(3347).then(t.bind(t,3347)),{loadableGenerated:{modules:["..\\components\\Profile\\PurchaseDetails.js -> ~/components/Ui/Modal/modal"]}}),[p,_]=(0,c.useState)(!1),[f,y]=(0,c.useState)({id:null,name:null,oid:null}),[g,N]=(0,c.useState)({product:{},oid:null}),{t:w}=(0,b.useTranslation)(),S=(0,i.useSelector)(e=>e.settings),R=S.settingsData.currency.symbol,decimalBalance=e=>Math.round(10*e)/10,product_review=(e,s,t)=>{y({id:e,name:s,oid:t}),_(!0)},closeModal=()=>{_(!1)};return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsxs)("div",{className:`${j().card} border-0 shadow`,children:[r.jsx("div",{className:j().close,onClick:s,children:r.jsx(n.yg,{width:17,height:17})}),(0,r.jsxs)("div",{className:"card border-0",children:[r.jsx("div",{className:"card-header bg-white py-3 fw-bold",children:w("order_details")}),r.jsx("div",{className:"card-body",children:(0,r.jsxs)("div",{className:h().body,children:[(0,r.jsxs)("div",{className:`${h().order_details} row`,children:[(0,r.jsxs)("div",{className:"col-md-6",children:[(0,r.jsxs)("h6",{children:[w("order_details")," :"]}),(0,r.jsxs)("p",{children:[w("order_id"),": ",r.jsx("span",{children:e.orderId})]}),(0,r.jsxs)("p",{children:[w("order_date")," :"," ",r.jsx("span",{children:(0,u.vc)(e.orderDate)})]}),(0,r.jsxs)("p",{children:[w("payment_status")," :"," ","Unpaid"===e.paymentStatus?r.jsx("span",{className:"badge bg-danger",children:"Unpaid"}):r.jsx("span",{className:"badge bg-success",children:"Paid"})]}),(0,r.jsxs)("p",{children:[w("order_status"),":"," ",r.jsx("span",{className:"badge bg-primary",children:e.status})]}),(0,r.jsxs)("p",{children:[w("payment_method"),": ",r.jsx("span",{children:e.paymentMethod})]})]}),(0,r.jsxs)("div",{className:"col-md-6",children:[(0,r.jsxs)("h6",{children:[w("delivery_information")," :"]}),(0,r.jsxs)("p",{children:[w("delivery_type"),": ",r.jsx("span",{children:e.deliveryInfo.type})]}),e.deliveryInfo.area&&(0,r.jsxs)("p",{children:[w("delivery_area"),":"," ",r.jsx("span",{children:e.deliveryInfo.area})]}),(0,r.jsxs)("p",{children:[w("delivery_cost")," :"," ",r.jsx("span",{children:R+e.deliveryInfo.cost})]})]})]}),r.jsx("div",{className:"table-responsive",children:(0,r.jsxs)("table",{className:"table table-bordered",children:[r.jsx("thead",{children:(0,r.jsxs)("tr",{children:[r.jsx("th",{scope:"col",children:"#"}),r.jsx("th",{scope:"col",children:w("products")}),r.jsx("th",{scope:"col",children:w("quantity")}),r.jsx("th",{scope:"col",children:w("price")}),r.jsx("th",{scope:"col",children:w("review")})]})}),r.jsx("tbody",{children:e.products.map((s,t)=>(0,r.jsxs)("tr",{children:[r.jsx("th",{scope:"row",children:t+1}),r.jsx("td",{children:s.name}),r.jsx("td",{children:s.qty}),r.jsx("td",{children:R+s.price}),r.jsx("td",{children:"Delivered"===e.status?(0,r.jsxs)(r.Fragment,{children:[r.jsx("button",{className:j().review_button,onClick:()=>product_review(s._id,s.name,e.orderId),disabled:!!s.review,children:s.review?"reviewed":"Review"}),r.jsx("button",{className:j().review_button,onClick:()=>N({product:s,oid:e.orderId}),disabled:!!s.refundRequest,children:s.refundRequest?"Refund requested":"Refund request"})]}):"Not Delivered Yet"})]},t+s._id))})]})}),(0,r.jsxs)("div",{className:h().payment_info,children:[(0,r.jsxs)("div",{children:[r.jsx("span",{children:w("sub_total")}),r.jsx("span",{children:R+e.totalPrice})]}),(0,r.jsxs)("div",{children:[r.jsx("span",{children:w("discount")}),r.jsx("span",{children:R+decimalBalance((0,u.dA)(e.totalPrice,e.coupon?.discount||0))})]}),(0,r.jsxs)("div",{children:[r.jsx("span",{children:w("delivery_charge")}),r.jsx("span",{children:R+e.deliveryInfo.cost})]}),(0,r.jsxs)("div",{children:[r.jsx("span",{children:w("vat")}),(0,r.jsxs)("span",{children:[R,decimalBalance(e.vat)]})]}),(0,r.jsxs)("div",{children:[r.jsx("span",{children:w("tax")}),(0,r.jsxs)("span",{children:[R,decimalBalance(e.tax)]})]}),(0,r.jsxs)("div",{children:[r.jsx("span",{children:w("total")}),r.jsx("span",{children:R+e.payAmount})]})]})]})})]})]}),r.jsx(d,{isOpen:p,handleCloseModal:closeModal,small:!0,children:r.jsx(function({data:e}){let[t,n]=(0,c.useState)(""),[d,l]=(0,c.useState)(1),i=(0,c.useRef)();async function postReview(t){try{t.preventDefault(),n("loading");let r={pid:e.id,oid:e.oid,rating:d,comment:i.current.value.trim()},l=await (0,u.qC)("/api/review",r);l.success?(o.toast.success("Review Added Successfully"),s(),closeModal(),a()):o.toast.error("Something Went Wrong 500")}catch(e){console.log(e),o.toast.error(`Something Went Wrong - ${e.message}`)}n("")}return(0,r.jsxs)("form",{onSubmit:postReview,children:[(0,r.jsxs)("div",{className:"mb-3",children:[r.jsx("label",{className:"form-label",children:"Product"}),r.jsx("p",{children:e.name})]}),(0,r.jsxs)("div",{className:"mb-3",children:[r.jsx("label",{className:"form-label",children:"Rating"}),r.jsx(x.Z,{rate:l})]}),(0,r.jsxs)("div",{className:"mb-3",children:[r.jsx("label",{className:"form-label",children:"Comment"}),r.jsx("textarea",{className:"form-control",ref:i,required:!0})]}),r.jsx(m.default,{text:"Submit Review",state:t,type:"submit"})]})},{data:f})}),r.jsx(d,{isOpen:!!g.oid,handleCloseModal:()=>N({product:{},oid:null}),children:r.jsx(v.Z,{data:g,orderData:e,update:a,hide:s,close:()=>N({product:{},oid:null})})})]})}[o,b,v]=f.then?(await f)():f,a()}catch(e){a(e)}})},58231:(e,s,t)=>{"use strict";t.a(e,async(e,a)=>{try{t.r(s),t.d(s,{default:()=>__WEBPACK_DEFAULT_EXPORT__});var r=t(20997),n=t(80140),d=t(16689),l=t(2583),c=t.n(l),i=t(6022),o=t(15941),u=t(37508),p=t.n(u),h=t(2022),m=t(36744),x=t(18214),_=t(27804),j=t(57987),b=e([o,_,j]);[o,_,j]=b.then?(await b)():b;let __WEBPACK_DEFAULT_EXPORT__=e=>{let s=`/api/profile?id=${e.id}&scope=orders`,{data:t,error:a,mutate:l}=(0,o.default)(e.id?s:null,h.gN),[u,b]=(0,d.useState)([]),v=(0,i.useSelector)(e=>e.settings),{t:f}=(0,j.useTranslation)();(0,d.useEffect)(()=>{t&&t.user&&b(t.user.orders)},[t]);let[y,g]=(0,d.useState)(!1),[N,w]=(0,d.useState)(null),[S,R]=(0,d.useState)(""),[T,C]=(0,d.useState)(!1),D=u.filter(e=>e.orderId&&e.orderId.toLowerCase().includes(S.toLowerCase())),q=(0,d.useMemo)(()=>r.jsx(m.default,{onFilter:e=>R(e),onClear:()=>{S&&(C(!T),R(""))},filterText:S,placeholder:"Tracking Number"}),[S,T]),I=[{name:f("tracking_number"),selector:e=>e.orderId,grow:1.5},{name:f("date"),selector:e=>(0,h.vc)(e.orderDate),sortable:!0},{name:f("amount"),selector:e=>v.settingsData.currency.symbol+e.payAmount},{name:f("delivery_status"),selector:e=>e.status,sortable:!0},{name:f("payment_status"),selector:e=>e.paymentStatus,sortable:!0},{name:f("action"),selector:e=>r.jsx("div",{className:p().button,children:r.jsx(n.bA,{width:20,height:20,title:"view",onClick:()=>(function(e){let s=u.find(s=>s.orderId===e);w(s),g(!0)})(e.orderId)})})}];return r.jsx(r.Fragment,{children:a?r.jsx("div",{className:"text-center text-danger",children:"failed to load"}):t?(0,r.jsxs)(r.Fragment,{children:[r.jsx(c(),{columns:I,data:D,pagination:!0,paginationResetDefaultPage:T,subHeader:!0,subHeaderComponent:q,persistTableHead:!0,customStyles:{rows:{style:{minHeight:"92px",fontSize:"15px"}},headCells:{style:{fontSize:"15px"}}}}),y&&N&&r.jsx(_.Z,{data:N,hide:function(){w(null),g(!1)},update:l})]}):r.jsx(x.default,{})})};a()}catch(e){a(e)}})},62774:(e,s,t)=>{"use strict";t.a(e,async(e,a)=>{try{t.d(s,{Z:()=>RefundForm});var r=t(20997),n=t(16689),d=t(3590),l=t(2022),c=t(59010),i=t(6022),o=t(94504),u=t(57987),p=t(76606),h=e([d,o,u]);function RefundForm({data:e,orderData:s,update:t,hide:a,close:h}){let[m,x]=(0,n.useState)([]),[_,j]=(0,n.useState)(""),b=(0,i.useSelector)(e=>e.settings),v=b.settingsData.currency.symbol,f=(0,n.useRef)(null),{t:y}=(0,u.useTranslation)(),g=(0,l.dA)(e.product.price*e.product.qty,e.product.vat||0),N=(0,l.dA)(e.product.price*e.product.qty,e.product.tax||0),w=+(e.product.price*e.product.qty+g+N).toFixed(2),S=+(0,l.dA)(e.product.price,s.coupon?.discount||0).toFixed(2),R=+(w-S).toFixed(2);async function requestRefundHandle(s){try{s.preventDefault(),j("loading");let r={product:{id:e.product._id,name:e.product.name,color:e.product?.color?.name||null,attribute:e.product?.attribute?.name||null,price:e.product.price,qty:e.product.qty,vat:e.product.vat,tax:e.product.tax},refundReason:f.current.value.trim(),status:"Pending",attachments:m,refundAmount:R,orderId:e.oid},n=await (0,l.qC)("/api/refund",r);n.success?(d.toast.success("Refund Request Successful please wait for the response"),t(),a(),h()):d.toast.error("Something Went Wrong 500")}catch(e){console.log(e),d.toast.error(`Something Went Wrong - ${e.message}`)}j("")}return(0,r.jsxs)("form",{className:"p-2",onSubmit:requestRefundHandle,children:[r.jsx("div",{className:"card mt-2",children:r.jsx("div",{className:"card-body",children:(0,r.jsxs)("div",{className:"row",children:[r.jsx("div",{className:"col-3 col-sm-2",children:r.jsx(c.default,{src:e.product.image[0]?.url})}),(0,r.jsxs)("div",{className:"col-9 col-sm-7 text-left",children:[r.jsx("p",{children:e.product.name}),(0,r.jsxs)("span",{children:[y("Variant"),":"]}),e.product?.color?.name&&r.jsx("span",{children:e.product?.color?.name}),e.product?.attribute?.name&&r.jsx("span",{children:e.product?.attribute?.name})]}),(0,r.jsxs)("div",{className:"col-4 col-sm-3 text-left d-flex flex-column pl-0 mt-2 mt-sm-0 pl-sm-5",children:[(0,r.jsxs)("span",{children:["QTY : ",e.product.qty]}),(0,r.jsxs)("span",{children:["Price :",v,e.product.price]}),(0,r.jsxs)("span",{children:["Tax :",v,(0,l.rQ)(e.product.tax)]}),(0,r.jsxs)("span",{children:["Vat :",v,(0,l.rQ)(e.product.vat)]})]})]})})}),r.jsx("div",{className:"card mt-3",children:r.jsx("div",{className:"card-body",children:(0,r.jsxs)("div",{className:"row text-center",children:[(0,r.jsxs)("span",{className:"col-sm-2",children:["Subtotal :",v,w]}),(0,r.jsxs)("span",{className:"col-sm-5",children:["Coupon discount :",v,S]}),(0,r.jsxs)("span",{className:"col-sm-5",children:["Total refund amount :",v,R]})]})})}),(0,r.jsxs)("div",{className:"my-3",children:[r.jsx("label",{className:"form-label",children:y("Refund reason")}),r.jsx("textarea",{className:"form-control",required:!0,ref:f})]}),r.jsx("div",{className:"my-5",children:r.jsx(o.default,{label:y("Attachments"),multiple:!0,updateFilesCb:x,maxFileSizeInBytes:2e6,accept:".jpg,.png,.jpeg"})}),r.jsx(p.default,{text:"Submit",state:_,type:"submit"})]})}[d,o,u]=h.then?(await h)():h,a()}catch(e){a(e)}})},31161:(e,s,t)=>{"use strict";t.d(s,{Z:()=>StarRating});var a=t(20997),r=t(16689),n=t(64155),d=t.n(n);function StarRating({rate:e}){let[s,t]=(0,r.useState)(0),[n,l]=(0,r.useState)(0);return a.jsx("div",{className:d().star_rating,children:[void 0,void 0,void 0,void 0,void 0].map((r,c)=>(c+=1,a.jsx("button",{type:"button",className:c<=(n||s)?d().on:d().off,onClick:()=>{var s;t(s=c),e(s)},onMouseEnter:()=>l(c),onMouseLeave:()=>l(s),children:a.jsx("span",{className:"star",children:"★"})},c)))})}},18214:(e,s,t)=>{"use strict";t.r(s),t.d(s,{default:()=>__WEBPACK_DEFAULT_EXPORT__});var a=t(20997),r=t(4859),n=t.n(r);let __WEBPACK_DEFAULT_EXPORT__=({color:e})=>a.jsx("div",{className:n().container,children:a.jsx("div",{className:n().spinner})})}};