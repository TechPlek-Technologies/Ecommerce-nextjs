"use strict";(()=>{var e={};e.id=200,e.ids=[200],e.modules={11185:e=>{e.exports=require("mongoose")},20145:e=>{e.exports=require("next/dist/compiled/next-server/pages-api.runtime.prod.js")},49008:(e,t,a)=>{a.r(t),a.d(t,{config:()=>p,default:()=>c,routeModule:()=>g});var s={};a.r(s),a.d(s,{default:()=>apiHandler});var i=a(71802),r=a(47153),n=a(56249),o=a(1112),l=a(28434),u=a(13808);let d={name:1,slug:1,image:1,unit:1,unitValue:1,price:1,discount:1,type:1,variants:1,quantity:1,date:1,review:1};async function apiHandler(e,t){let{method:a}=e;if(await (0,u.Z)(),"GET"===a)try{let{category:a,subcategory:s,childcategory:i,brands:r,price_min:n,price_max:u}=e.query,c=await o.Z.find({});if(a||s||i||r||n||u){let e=await l.Z.find({$and:[a?{categories:a}:{},s?{subcategories:s}:{},i?{childCategories:i}:{},r?{brand:r}:{},n&&u?{discount:{$gte:+n,$lte:+u}}:{}]}).sort("-date").select(d).exec();t.status(200).json({product:e,product_length:e.length,category:c})}else{let e=await l.Z.find({}).sort("-date").limit(8).select(d).exec(),a=await l.Z.estimatedDocumentCount();t.status(200).json({product:e,product_length:a,category:c})}}catch(e){console.log(e),t.status(500).json({success:!1})}else t.status(400).json({success:!1})}let c=(0,n.l)(s,"default"),p=(0,n.l)(s,"config"),g=new i.PagesAPIRouteModule({definition:{kind:r.x.PAGES_API,page:"/api/gallery",pathname:"/api/gallery",bundlePath:"",filename:""},userland:s})}};var t=require("../../webpack-api-runtime.js");t.C(e);var __webpack_exec__=e=>t(t.s=e),a=t.X(0,[4222,9305,3808],()=>__webpack_exec__(49008));module.exports=a})();