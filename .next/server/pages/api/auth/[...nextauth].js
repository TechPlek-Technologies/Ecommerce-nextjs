"use strict";(()=>{var e={};e.id=3748,e.ids=[3748],e.modules={67096:e=>{e.exports=require("bcrypt")},11185:e=>{e.exports=require("mongoose")},20145:e=>{e.exports=require("next/dist/compiled/next-server/pages-api.runtime.prod.js")},49983:(e,r,t)=>{let a;t.r(r),t.d(r,{config:()=>A,default:()=>I,routeModule:()=>C});var s={};t.r(s),t.d(s,{default:()=>w});var n=t(71802),i=t(47153),o=t(56249);let l=require("@next-auth/mongodb-adapter");var d=t(67096),u=t.n(d);let c=require("next-auth");var p=t.n(c);let m=require("next-auth/providers/credentials");var v=t.n(m);let _=require("next-auth/providers/facebook");var h=t.n(_);let f=require("next-auth/providers/google");var g=t.n(f),E=t(16572);let x=require("mongodb");if(!process.env.MONGO_URI)throw Error("Please define the MONGODB URI (MONGO_URI) environment variable inside .env.local");let O=process.env.MONGO_URI;a=new x.MongoClient(O,{}).connect();let w=p()({adapter:(0,l.MongoDBAdapter)(a),providers:[g()({clientId:process.env.GOOGLE_CLIENT_ID,clientSecret:process.env.GOOGLE_CLIENT_SECRET}),h()({clientId:process.env.FACEBOOK_CLIENT_ID,clientSecret:process.env.FACEBOOK_CLIENT_SECRET}),v()({name:"Credentials",credentials:{username:{label:"Username",type:"email"},password:{label:"Password",type:"password"}},async authorize(e,r){let{username:t,password:a}=e,s=await E.Z.findOne({email:t});if(s){let e=await u().compare(a,s.hash);if(e)return s}return null}})],secret:process.env.AUTH_SECRET,session:{strategy:"jwt",maxAge:10800},jwt:{secret:process.env.AUTH_SECRET,maxAge:10800},callbacks:{async jwt({token:e,user:r}){let t=r&&{id:r.id,name:r.name,email:r.email,a:!!r.isAdmin&&r.isAdmin,s:r.isStaff&&r.isStaff.status?r.isStaff:{status:!1}};return r&&(e.user=t),Promise.resolve(e)},session:async({session:e,token:r,user:t})=>(e.user=r.user,Promise.resolve(e)),redirect:async({url:e,baseUrl:r})=>r},pages:{signIn:"/signin"},theme:{colorScheme:"light"}}),I=(0,o.l)(s,"default"),A=(0,o.l)(s,"config"),C=new n.PagesAPIRouteModule({definition:{kind:i.x.PAGES_API,page:"/api/auth/[...nextauth]",pathname:"/api/auth/[...nextauth]",bundlePath:"",filename:""},userland:s})},16572:(e,r,t)=>{t.d(r,{Z:()=>i});var a=t(11185),s=t(39305);let n=new a.Schema(s.EA),i=a.models.user||(0,a.model)("user",n)}};var r=require("../../../webpack-api-runtime.js");r.C(e);var __webpack_exec__=e=>r(r.s=e),t=r.X(0,[4222,9305],()=>__webpack_exec__(49983));module.exports=t})();