"use strict";(()=>{var e={};e.id=8141,e.ids=[8141],e.modules={3681:e=>{e.exports=require("custom-id-new")},60614:e=>{e.exports=require("next-auth/jwt")},20145:e=>{e.exports=require("next/dist/compiled/next-server/pages-api.runtime.prod.js")},73292:e=>{e.exports=require("fs/promises")},99012:(e,s,r)=>{r.r(s),r.d(s,{config:()=>d,default:()=>p,routeModule:()=>f});var a={};r.r(a),r.d(a,{config:()=>c,default:()=>apiHandler});var t=r(71802),i=r(47153),l=r(56249);r(3681);var u=r(58364),n=r(79664),o=r(11217);let c={api:{bodyParser:!1}};async function apiHandler(e,s){let{method:r}=e;if(!await (0,u.Z)(e,"general",!0))return s.status(403).json({success:!1,message:"Access Forbidden"});switch(r){case"POST":try{let r=await (0,o.c)(e),a=r.file.file.newFilename,t=`https://app.techplek.website/${a}`;s.status(200).json({success:!0,name:a,url:t})}catch(e){console.log(e),s.status(500).json({success:!1,err:e.message})}break;case"DELETE":try{let{query:r}=e;await (0,n.cn)(r.name),s.status(200).json({success:!0,err:null})}catch(e){console.log(e),s.status(500).json({success:!1,err:e.message})}break;default:s.status(400).json({success:!1})}}let p=(0,l.l)(a,"default"),d=(0,l.l)(a,"config"),f=new t.PagesAPIRouteModule({definition:{kind:i.x.PAGES_API,page:"/api/fileupload/local",pathname:"/api/fileupload/local",bundlePath:"",filename:""},userland:a})},11217:(e,s,r)=>{r.d(s,{c:()=>parseForm,t:()=>parseFormMultiple});let a=require("formidable");var t=r.n(a);function parseForm(e){return new Promise((s,r)=>{let a=t()({keepExtensions:!0,uploadDir:"./public/uploads"});a.parse(e,(e,a,t)=>{if(e)return r(e);s({field:a,file:t})})})}function parseFormMultiple(e){return new Promise((s,r)=>{let a=t()({multiples:!0,keepExtensions:!0,uploadDir:"./public/uploads"});a.parse(e,(e,a,t)=>{if(e)return r(e);s({field:a,file:t})})})}}};var s=require("../../../webpack-api-runtime.js");s.C(e);var __webpack_exec__=e=>s(s.s=e),r=s.X(0,[4222,8364,9664],()=>__webpack_exec__(99012));module.exports=r})();