(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[1116,8214],{45922:function(e,t,n){(window.__NEXT_P=window.__NEXT_P||[]).push(["/dashboard/attributes/[id]",function(){return n(77597)}])},18214:function(e,t,n){"use strict";n.r(t);var s=n(85893),a=n(31183),i=n.n(a);t.default=e=>{let{color:t}=e;return(0,s.jsx)("div",{className:i().container,children:(0,s.jsx)("div",{className:i().spinner})})}},77597:function(e,t,n){"use strict";n.r(t);var s=n(85893),a=n(12918),i=n.n(a),l=n(11163),r=n(67294),u=n(22120),c=n(22920),d=n(59734),o=n(83490),m=n.n(o),p=n(18214),b=n(2022);let EditAttribute=e=>{let t=(0,l.useRouter)(),n="/api/attributes/edit?id=".concat(t.query.id),{data:a,error:o}=(0,d.ZP)(t.query.id?n:null,b.gN),h=(0,r.useRef)(),x=(0,r.useRef)(),[f,v]=(0,r.useState)({}),[N,j]=(0,r.useState)([]),{t:_}=(0,u.$G)();(0,r.useEffect)(()=>{if(a&&a.attr){let e=a.attr.values?a.attr.values:[{name:"",value:""}];v(a.attr),j(e)}},[a]);let handleInputChange=(e,t)=>{let{name:n,value:s}=e.target,a=[...N];a[t][n]=s,j(a)},handleRemoveClick=e=>{let t=[...N];t.splice(e,1),j(t)},submitHandler=async e=>{e.preventDefault();try{let e=new FormData;e.append("id",x.current.value),e.append("name",h.current.value),e.append("value",JSON.stringify(N));let t=await (0,b.qC)("/api/attributes/edit",e);t.success?c.toast.success("Attribute Updated Successfully"):c.toast.error("Something Went Wrong")}catch(e){console.log(e),c.toast.error("Something Went Wrong")}};return(0,s.jsx)(s.Fragment,{children:o?(0,s.jsx)(i(),{statusCode:500}):a?f._id?(0,s.jsxs)("div",{children:[(0,s.jsx)("h4",{className:"text-center pt-3 pb-5",children:_("Edit Attribute")}),(0,s.jsxs)("form",{onSubmit:submitHandler,children:[(0,s.jsx)("input",{type:"hidden",ref:x,defaultValue:f._id}),(0,s.jsxs)("div",{className:"mb-4",children:[(0,s.jsxs)("label",{htmlFor:"inp-1",className:"form-label",children:[_("Attribute Name"),"*"]}),(0,s.jsx)("input",{type:"text",id:"inp-1",ref:h,defaultValue:f.name,className:m().input+" form-control",required:!0})]}),(0,s.jsxs)("div",{className:"card",children:[(0,s.jsx)("div",{className:"card-header",children:_("Attribute Value")}),(0,s.jsxs)("div",{className:"card-body",children:[N.map((e,t)=>(0,s.jsxs)("div",{className:"row mb-4",children:[(0,s.jsxs)("div",{className:"col-12 col-sm-5",children:[(0,s.jsx)("label",{className:"form-label",children:_("name")}),(0,s.jsx)("input",{type:"text",className:m().input+" form-control",name:"name",value:e.name,onChange:e=>handleInputChange(e,t)})]}),(0,s.jsxs)("div",{className:"col-12 col-sm-5",children:[(0,s.jsx)("label",{className:"form-label",children:_("Value")}),(0,s.jsx)("input",{type:"text",className:m().input+" form-control",name:"value",value:e.value,onChange:e=>handleInputChange(e,t)})]}),(0,s.jsx)("div",{className:"col-12 col-sm-2 d-flex align-items-end",children:(0,s.jsx)("button",{className:"btn btn-danger",type:"button",onClick:()=>handleRemoveClick(t),children:_("Remove")})})]},t)),(0,s.jsx)("button",{type:"button",className:"btn btn-success my-2",onClick:()=>{j([...N,{name:"",value:""}])},children:_("Add Value")})]})]}),(0,s.jsx)("div",{className:"my-4",children:(0,s.jsx)("input",{type:"submit",value:_("Update Attribute"),className:"btn btn-lg btn-success"})})]})]}):(0,s.jsx)(i(),{statusCode:404}):(0,s.jsx)(p.default,{})})};EditAttribute.requireAuthAdmin=!0,EditAttribute.dashboard=!0,t.default=EditAttribute},83490:function(e){e.exports={button_danger:"productForm_button_danger__HuxDf"}},31183:function(e){e.exports={container:"spinner_container__Ce8dH",spinner:"spinner_spinner__eipLJ",spin:"spinner_spin__LDwbh"}},12918:function(e,t,n){e.exports=n(66908)},11163:function(e,t,n){e.exports=n(59974)}},function(e){e.O(0,[9734,9774,2888,179],function(){return e(e.s=45922)}),_N_E=e.O()}]);