(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[6721],{15309:function(e,t,s){(window.__NEXT_P=window.__NEXT_P||[]).push(["/dashboard/settings/seo",function(){return s(96382)}])},96382:function(e,t,s){"use strict";s.r(t);var a=s(85893),r=s(5152),l=s.n(r),n=s(67294),i=s(22120),o=s(25617),c=s(22920),d=s(59734),m=s(2022);let u=l()(()=>s.e(8214).then(s.bind(s,18214)),{loadableGenerated:{webpack:()=>[18214]}}),p=l()(()=>Promise.all([s.e(7529),s.e(8188)]).then(s.bind(s,76606)),{loadableGenerated:{webpack:()=>[76606]}}),h=l()(()=>Promise.all([s.e(7529),s.e(5675),s.e(5121),s.e(4504)]).then(s.bind(s,94504)),{loadableGenerated:{webpack:()=>[94504]}}),SettingsPageSeo=()=>{let{data:e,error:t}=(0,d.ZP)("/api/settings",m.gN),[s,r]=(0,n.useState)([]),[l,x]=(0,n.useState)([]),[g,b]=(0,n.useState)(""),{t:f}=(0,i.$G)();(0,n.useEffect)(()=>{e&&e.settings&&(r(e.settings),x(e.settings.seo.image))},[e]);let{session:j}=(0,o.v9)(e=>e.localSession),[N,S]=(0,n.useState)({});(0,n.useEffect)(()=>{S((0,m.wn)(j,"settings"))},[j]);let y=(0,n.useRef)(),w=(0,n.useRef)(),v=(0,n.useRef)(),F=(0,n.useRef)(),_=(0,n.useRef)(),handleForm=async e=>{e.preventDefault(),b("loading");try{let e={title:y.current.value.trim(),description:v.current.value.trim(),keyword:w.current.value.trim(),image:JSON.stringify(l)},t=new FormData;for(let s in e)t.append(s,e[s]);let s=await (0,m.qC)("/api/settings?scope=seo",t);s.success?c.toast.success("Setting Updated Successfully"):c.toast.error("Something Went Wrong (500)")}catch(e){c.toast.error("Something Went Wrong (".concat(e.message,")"))}b("")},handleSitemapForm=async e=>{try{e.preventDefault(),b("loading");let t=new FormData;t.append("sitemap",F.current.value);let s=await (0,m.qC)("/api/settings?scope=sitemap",t);s.success?c.toast.success("Sitemap Updated Successfully"):c.toast.error("Something Went Wrong (500)")}catch(e){c.toast.error("Something Went Wrong (".concat(e.message,")"))}b("")},handleRobotForm=async e=>{try{e.preventDefault(),b("loading");let t=new FormData;t.append("robots",_.current.value);let s=await (0,m.qC)("/api/settings?scope=robot",t);s.success?c.toast.success("Robots.txt Updated Successfully"):c.toast.error("Something Went Wrong (".concat(s.err,")"))}catch(e){c.toast.error("Something Went Wrong (".concat(e.message,")"))}b("")};return(0,a.jsx)(a.Fragment,{children:t?(0,a.jsx)("div",{className:"text-center text-danger",children:"failed to load"}):s._id?(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)("form",{onSubmit:handleForm,children:(0,a.jsxs)("div",{className:"card mb-5 border-0 shadow",children:[(0,a.jsx)("div",{className:"card-header bg-white py-3 fw-bold",children:f("Global Seo Settings")}),(0,a.jsxs)("div",{className:"card-body",children:[(0,a.jsxs)("div",{className:"py-3",children:[(0,a.jsx)("label",{htmlFor:"inp-1",className:"form-label",children:f("Meta Title")}),(0,a.jsx)("input",{type:"text",ref:y,id:"inp-1",defaultValue:s.seo.title,className:"form-control"})]}),(0,a.jsxs)("div",{className:"py-3",children:[(0,a.jsx)("label",{htmlFor:"inp-2",className:"form-label",children:f("Meta Description")}),(0,a.jsx)("textarea",{ref:v,id:"inp-2",defaultValue:s.seo.description,className:"form-control"})]}),(0,a.jsxs)("div",{className:"py-3",children:[(0,a.jsx)("label",{htmlFor:"inp-3",className:"form-label",children:f("Keywords")}),(0,a.jsx)("textarea",{ref:w,id:"inp-3",defaultValue:s.seo.keyword,className:"form-control"}),(0,a.jsx)("small",{className:"text-muted",children:"Separate with coma"})]}),(0,a.jsx)(h,{accept:".jpg,.png,.jpeg",label:f("Meta Image"),multiple:!0,maxFileSizeInBytes:2e6,updateFilesCb:x,preSelectedFiles:l}),N.edit&&(0,a.jsx)("div",{className:"py-3",children:(0,a.jsx)(p,{type:"submit",text:f("UPDATE"),state:g})})]})]})}),(0,a.jsx)("form",{onSubmit:handleSitemapForm,children:(0,a.jsxs)("div",{className:"card mb-5 border-0 shadow",children:[(0,a.jsx)("div",{className:"card-header bg-white py-3 fw-bold",children:"Sitemap.xml"}),(0,a.jsxs)("div",{className:"card-body",children:[(0,a.jsxs)("div",{className:"py-3",children:[(0,a.jsx)("textarea",{ref:F,id:"inp-2",rows:"4",className:"form-control"}),(0,a.jsx)("small",{className:"text-muted",children:f("Insert your sitemap.xml file content")})]}),N.edit&&(0,a.jsx)("div",{className:"py-3",children:(0,a.jsx)(p,{type:"submit",text:f("UPDATE"),state:g})})]})]})}),(0,a.jsx)("form",{onSubmit:handleRobotForm,children:(0,a.jsxs)("div",{className:"card mb-5 border-0 shadow",children:[(0,a.jsx)("div",{className:"card-header bg-white py-3 fw-bold",children:"Robots.txt"}),(0,a.jsxs)("div",{className:"card-body",children:[(0,a.jsxs)("div",{className:"py-3",children:[(0,a.jsx)("textarea",{ref:_,id:"inp-2",rows:"4",className:"form-control"}),(0,a.jsx)("small",{className:"text-muted",children:f("Insert your robots.txt file content")})]}),N.edit&&(0,a.jsx)("div",{className:"py-3",children:(0,a.jsx)(p,{type:"submit",text:f("UPDATE"),state:g})})]})]})})]}):(0,a.jsx)(u,{})})};SettingsPageSeo.requireAuthAdmin=!0,SettingsPageSeo.dashboard=!0,t.default=SettingsPageSeo}},function(e){e.O(0,[9734,9774,2888,179],function(){return e(e.s=15309)}),_N_E=e.O()}]);