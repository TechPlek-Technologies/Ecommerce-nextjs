(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[4954],{96553:function(e,t,a){"use strict";a.d(t,{b:function(){return o}});var n=a(87462),r=a(67294),s=a(7529),o=r.forwardRef(function(e,t){return r.createElement(s.r,(0,n.Z)({iconAttrs:{fill:"currentColor",xmlns:"http://www.w3.org/2000/svg"},iconVerticalAlign:"middle",iconViewBox:"0 0 16 16"},e,{ref:t}),r.createElement("path",{d:"M16 8s-3-5.5-8-5.5S0 8 0 8s3 5.5 8 5.5S16 8 16 8zM1.173 8a13.133 13.133 0 0 1 1.66-2.043C4.12 4.668 5.88 3.5 8 3.5c2.12 0 3.879 1.168 5.168 2.457A13.133 13.133 0 0 1 14.828 8c-.058.087-.122.183-.195.288-.335.48-.83 1.12-1.465 1.755C11.879 11.332 10.119 12.5 8 12.5c-2.12 0-3.879-1.168-5.168-2.457A13.134 13.134 0 0 1 1.172 8z"}),r.createElement("path",{d:"M8 5.5a2.5 2.5 0 1 0 0 5 2.5 2.5 0 0 0 0-5zM4.5 8a3.5 3.5 0 1 1 7 0 3.5 3.5 0 0 1-7 0z"}))});o.displayName="Eye"},25137:function(e,t,a){"use strict";a.d(t,{r:function(){return o}});var n=a(87462),r=a(67294),s=a(7529),o=r.forwardRef(function(e,t){return r.createElement(s.r,(0,n.Z)({iconAttrs:{fill:"currentColor",xmlns:"http://www.w3.org/2000/svg"},iconVerticalAlign:"middle",iconViewBox:"0 0 16 16"},e,{ref:t}),r.createElement("path",{d:"M5.5 5.5A.5.5 0 0 1 6 6v6a.5.5 0 0 1-1 0V6a.5.5 0 0 1 .5-.5zm2.5 0a.5.5 0 0 1 .5.5v6a.5.5 0 0 1-1 0V6a.5.5 0 0 1 .5-.5zm3 .5a.5.5 0 0 0-1 0v6a.5.5 0 0 0 1 0V6z"}),r.createElement("path",{fillRule:"evenodd",d:"M14.5 3a1 1 0 0 1-1 1H13v9a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V4h-.5a1 1 0 0 1-1-1V2a1 1 0 0 1 1-1H6a1 1 0 0 1 1-1h2a1 1 0 0 1 1 1h3.5a1 1 0 0 1 1 1v1zM4.118 4 4 4.059V13a1 1 0 0 0 1 1h6a1 1 0 0 0 1-1V4.059L11.882 4H4.118zM2.5 3V2h11v1h-11z"}))});o.displayName="Trash"},94201:function(e,t,a){(window.__NEXT_P=window.__NEXT_P||[]).push(["/dashboard/orders",function(){return a(58867)}])},58867:function(e,t,a){"use strict";a.r(t);var n=a(85893),r=a(25137),s=a(96553),o=a(5152),c=a.n(o),l=a(67294),i=a(22120),d=a(25617),u=a(22920),h=a(71178),m=a.n(h),p=a(2022);let _=c()(()=>a.e(44).then(a.bind(a,90044)),{loadableGenerated:{webpack:()=>[90044]}}),g=c()(()=>a.e(6744).then(a.bind(a,36744)),{loadableGenerated:{webpack:()=>[36744]}}),b=c()(()=>Promise.all([a.e(3253),a.e(8505)]).then(a.bind(a,3347)),{loadableGenerated:{webpack:()=>[3347]}}),f=c()(()=>a.e(1664).then(a.t.bind(a,41664,23)),{loadableGenerated:{webpack:()=>[41664]}}),OrderPage=()=>{let[e,t]=(0,l.useState)([]),[a,o]=(0,l.useState)(!1),[c,h]=(0,l.useState)(0),[x,v]=(0,l.useState)(1),[S,w]=(0,l.useState)(""),{t:y}=(0,i.$G)(),decimalBalance=e=>Math.round(10*e)/10,j=(0,d.v9)(e=>e.settings),P=j.settingsData.currency.symbol,[N,C]=(0,l.useState)(!1),[E,V]=(0,l.useState)(""),{session:W}=(0,d.v9)(e=>e.localSession),[M,O]=(0,l.useState)({});(0,l.useEffect)(()=>{O((0,p.wn)(W,"order"))},[W]);let openModal=e=>{V(e),C(!0)},closeModal=()=>{C(!1)},mutate=async()=>await fetchServerData(x,10),deleteOrder=async()=>{C(!1),await (0,p.SR)("/api/order?id=".concat(E)).then(e=>e.success?(u.toast.success("Order Deleted Successfully"),mutate()):u.toast.error("Something Went Wrong")).catch(e=>{console.log(e),u.toast.error("Something Went Wrong")})},handlePaymentStatus=async(e,t,a)=>{let n="/api/order/".concat(a,"?payment_status=").concat(e.target.value,"&order_status=").concat(t,"&action=payment");await (0,p.VA)(n).then(e=>e.success?(u.toast.success("Order Payment Status Updated Successfully"),mutate()):u.toast.error("Something Went Wrong")).catch(e=>{console.log(e),u.toast.error("Something Went Wrong")})},handleOrderStatus=async(e,t,a)=>{let n="/api/order/".concat(a,"?payment_status=").concat(t,"&order_status=").concat(e.target.value,"&action=order");await (0,p.VA)(n).then(e=>e.success?(u.toast.success("Order Status Updated Successfully"),mutate()):u.toast.error("Something Went Wrong")).catch(e=>{console.log(e),u.toast.error("Something Went Wrong")})},fetchServerData=async(e,a)=>{try{o(!0);let n=await (0,p.gN)("/api/order?pageSize=".concat(a,"&pageNumber=").concat(e,"&queryText=").concat(S));n.success&&(t(n.order),h(n.total)),o(!1)}catch(e){console.error("Error fetching data:",e.message),o(!1)}};(0,l.useEffect)(()=>{fetchServerData(1,10)},[]),(0,l.useEffect)(()=>{fetchServerData(x,10)},[x,S]);let[k,z]=l.useState(!1),A=l.useMemo(()=>(0,n.jsx)(g,{onFilter:e=>w(e),onClear:()=>{S&&(z(!k),w(""))},filterText:S,placeholder:y("tracking_number")}),[S,k]),D=[{name:y("tracking_number"),selector:e=>(0,n.jsxs)(n.Fragment,{children:[e.orderId,e.new&&(0,n.jsx)("span",{className:"badge rounded-pill bg-primary ms-1",children:"NEW"})]}),minWidth:"215px"},{name:y("order_date"),selector:e=>(0,p.vc)(e.orderDate),sortable:!0,wrap:!0},{name:y("amount"),selector:e=>P+decimalBalance(e.payAmount),sortable:!0},{name:y("payment_status"),selector:e=>M.edit?(0,n.jsx)("div",{className:"dropdown",children:(0,n.jsxs)("select",{defaultValue:e.paymentStatus,onChange:t=>handlePaymentStatus(t,e.status,e._id),disabled:"Paid"===e.paymentStatus,className:"form-select form-select-sm",children:[(0,n.jsx)("option",{value:"Paid",children:"Paid"}),(0,n.jsx)("option",{value:"Unpaid",children:"Unpaid"})]},e.paymentStatus)}):e.paymentStatus.toUpperCase()},{name:y("delivery_status"),selector:e=>M.edit?(0,n.jsx)("div",{className:"dropdown",children:(0,n.jsxs)("select",{defaultValue:e.status,onChange:t=>handleOrderStatus(t,e.paymentStatus,e._id),className:"form-select form-select-sm",children:[(0,n.jsx)("option",{value:"Pending",children:"Pending"}),(0,n.jsx)("option",{value:"In Progress",children:"In Progress"}),(0,n.jsx)("option",{value:"Packaged",children:"Packaged"}),(0,n.jsx)("option",{value:"Shipped",children:"Shipped"}),(0,n.jsx)("option",{value:"Delivered",children:"Delivered"}),(0,n.jsx)("option",{value:"Canceled",children:"Canceled"}),(0,n.jsx)("option",{value:"Draft",disabled:!0,hidden:!0,children:"Failed"})]},e.status)}):e.status.toUpperCase(),minWidth:"130px"},{name:y("action"),selector:e=>(0,n.jsxs)("div",{children:[M.delete&&(0,n.jsx)("div",{className:m().button,onClick:()=>openModal(e._id),children:(0,n.jsx)(r.r,{width:22,height:22,title:"DELETE"})}),M.view&&(0,n.jsx)(f,{href:"/dashboard/orders/".concat(e._id),children:(0,n.jsx)("div",{className:m().button,children:(0,n.jsx)(s.b,{width:22,height:22,title:"VIEW"})})})]}),minWidth:"140px"}];return(0,n.jsxs)("div",{children:[(0,n.jsx)("h4",{className:"text-center pt-3 pb-5",children:y("orders")}),(0,n.jsxs)("div",{className:m().container,children:[(0,n.jsx)(_,{columns:D,data:e,pagination:!0,paginationResetDefaultPage:k,subHeader:!0,subHeaderComponent:A,persistTableHead:!0,customStyles:{rows:{style:{minHeight:"92px",fontSize:"15px"}},headCells:{style:{fontSize:"15px"}}},paginationTotalRows:c,paginationServer:!0,onChangePage:e=>{v(e)},progressPending:a,paginationRowsPerPageOptions:[10]}),(0,n.jsx)(b,{isOpen:N,handleCloseModal:closeModal,small:!0,children:(0,n.jsxs)("div",{className:m().modal_icon,children:[(0,n.jsx)(r.r,{width:90,height:90}),(0,n.jsx)("p",{children:"Are you sure, you want to delete?"}),(0,n.jsxs)("div",{children:[(0,n.jsx)("button",{className:m().danger_button,onClick:()=>deleteOrder(),children:"Delete"}),(0,n.jsx)("button",{className:m().success_button,onClick:()=>closeModal(),children:"Cancel"})]})]})})]})]})};OrderPage.requireAuthAdmin=!0,OrderPage.dashboard=!0,t.default=OrderPage},71178:function(e){e.exports={container:"table_container__f1mC4",button:"table_button__LF8_5",modal_icon:"table_modal_icon__t_aHR",danger_button:"table_danger_button__jpS_l",success_button:"table_success_button__lcGr5",color_viewer:"table_color_viewer__54oBu",search_bar:"table_search_bar__anNGy",search_bar_button:"table_search_bar_button__OjZ8a"}}},function(e){e.O(0,[7529,9774,2888,179],function(){return e(e.s=94201)}),_N_E=e.O()}]);