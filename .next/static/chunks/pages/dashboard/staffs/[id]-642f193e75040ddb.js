(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[6603,5885,8214,922,2444,6606,8188],{50263:function(e,s,t){"use strict";t.d(s,{z:function(){return i}});var a=t(87462),r=t(67294),n=t(7529),i=r.forwardRef(function(e,s){return r.createElement(n.r,(0,a.Z)({iconAttrs:{fill:"currentColor",xmlns:"http://www.w3.org/2000/svg"},iconVerticalAlign:"middle",iconViewBox:"0 0 16 16"},e,{ref:s}),r.createElement("path",{d:"M3.05 3.05a7 7 0 0 0 0 9.9.5.5 0 0 1-.707.707 8 8 0 0 1 0-11.314.5.5 0 0 1 .707.707zm2.122 2.122a4 4 0 0 0 0 5.656.5.5 0 1 1-.708.708 5 5 0 0 1 0-7.072.5.5 0 0 1 .708.708zm5.656-.708a.5.5 0 0 1 .708 0 5 5 0 0 1 0 7.072.5.5 0 1 1-.708-.708 4 4 0 0 0 0-5.656.5.5 0 0 1 0-.708zm2.122-2.12a.5.5 0 0 1 .707 0 8 8 0 0 1 0 11.313.5.5 0 0 1-.707-.707 7 7 0 0 0 0-9.9.5.5 0 0 1 0-.707zM10 8a2 2 0 1 1-4 0 2 2 0 0 1 4 0z"}))});i.displayName="Broadcast"},51536:function(e,s,t){(window.__NEXT_P=window.__NEXT_P||[]).push(["/dashboard/staffs/[id]",function(){return t(65076)}])},76606:function(e,s,t){"use strict";t.r(s);var a=t(85893),r=t(50263),n=t(67294),i=t(86425),l=t.n(i);s.default=e=>{let{text:s,type:t,state:i,clickEvent:c}=e,[d,o]=(0,n.useState)("");return(0,n.useEffect)(()=>{o(i)},[i]),(0,a.jsx)("button",{className:l().button,onClick:c,type:t||"button",children:(0,a.jsxs)("div",{children:[(0,a.jsxs)("span",{children:[s," "]}),"loading"===d&&(0,a.jsx)(r.z,{width:25,height:25,className:l().svg})]})})}},18214:function(e,s,t){"use strict";t.r(s);var a=t(85893),r=t(31183),n=t.n(r);s.default=e=>{let{color:s}=e;return(0,a.jsx)("div",{className:n().container,children:(0,a.jsx)("div",{className:n().spinner})})}},42444:function(e,s,t){"use strict";t.r(s);var a=t(85893),r=t(67294),n=t(59734),i=t(75885),l=t(2022),c=t(18214);let d=(0,r.forwardRef)((e,s)=>{let{data:t,error:d,mutate:o}=(0,n.ZP)(e.url?e.url:null,l.gN);return((0,r.useImperativeHandle)(s,()=>({update:()=>{o()}})),(0,r.useEffect)(()=>{t&&t.success&&e.setData(t)},[t]),d)?(0,a.jsx)(i.default,{}):t?t&&!t.success?(0,a.jsx)(i.default,{}):(0,a.jsxs)(a.Fragment,{children:[" ",e.children," "]}):(0,a.jsx)("div",{style:{height:"100vh"},children:(0,a.jsx)(c.default,{})})});s.default=d},75885:function(e,s,t){"use strict";t.r(s);var a=t(85893),r=t(41664),n=t.n(r),i=t(69032),l=t.n(i);s.default=()=>(0,a.jsx)("div",{className:l().body,children:(0,a.jsx)("div",{className:l().body_container,children:(0,a.jsxs)("div",{className:l().ntfnd,children:[(0,a.jsx)("div",{className:l().error,children:(0,a.jsx)("h1",{children:"500"})}),(0,a.jsx)("h2",{children:"Oooops! Internal Server Error."}),(0,a.jsxs)("p",{children:["That is, something went terribly wrong. We suggest you to go back or visit here later",(0,a.jsx)("br",{}),(0,a.jsx)(n(),{href:"/",children:"Return to homepage"})]})]})})})},65076:function(e,s,t){"use strict";t.r(s);var a=t(85893),r=t(11163),n=t(67294),i=t(22120),l=t(22920),c=t(76606),d=t(42444),o=t(2022);let EditStaff=()=>{let e=(0,r.useRouter)(),[s,t]=(0,n.useState)({users:{isStaff:{}}}),[u,m]=(0,n.useState)(null),[f,h]=(0,n.useState)(""),{t:p}=(0,i.$G)();(0,n.useEffect)(()=>{s.users.isStaff.permissions&&m(s.users.isStaff.permissions)},[s]);let handleForm=async e=>{e.preventDefault(),h("loading");try{let t=e.target.elements,{name:a,surname:r,email:n}=t,i={name:a.value.trim(),surname:r.value.trim(),email:n.value.trim(),id:s.users._id,permissions:u},c=await (0,o.VA)("/api/staffs",i);c.success?l.toast.success("Staff Information Updated Successfully"):c.message?l.toast.error(c.message):l.toast.error("Something Went Wrong (500)")}catch(e){l.toast.error("Something Went Wrong (".concat(e.message,")"))}h("")};function updatePermission(e,s,t){let a=u.findIndex(s=>s.name===e);if(a>-1){let e=u[a];e[s]=t.checked}}return e.query.id?(0,a.jsx)(d.default,{url:"/api/staffs?id=".concat(e.query.id),setData:t,ref:o.VA,children:(0,a.jsxs)("form",{onSubmit:handleForm,children:[(0,a.jsxs)("div",{className:"card mb-5 border-0 shadow",children:[(0,a.jsx)("div",{className:"card-header bg-white py-3 fw-bold",children:p("Staff Information")}),(0,a.jsxs)("div",{className:"card-body",children:[(0,a.jsxs)("div",{className:"py-3",children:[(0,a.jsx)("label",{htmlFor:"inp-001",className:"form-label",children:p("name")}),(0,a.jsx)("input",{type:"text",id:"inp-001",name:"name",className:"form-control",required:!0,defaultValue:s.users.name})]}),(0,a.jsxs)("div",{className:"py-3",children:[(0,a.jsx)("label",{htmlFor:"inp-002",className:"form-label",children:p("Surname")}),(0,a.jsx)("input",{type:"text",id:"inp-002",name:"surname",className:"form-control",required:!0,defaultValue:s.users.isStaff.surname})]}),(0,a.jsxs)("div",{className:"py-3",children:[(0,a.jsx)("label",{htmlFor:"inp-003",className:"form-label",children:p("email")}),(0,a.jsx)("input",{type:"email",id:"inp-003",name:"email",className:"form-control",required:!0,defaultValue:s.users.email})]})]})]}),(0,a.jsxs)("div",{className:"card mb-5 border-0 shadow",children:[(0,a.jsx)("div",{className:"card-header bg-white py-3 fw-bold",children:p("Staff permissions")}),(0,a.jsx)("div",{className:"card-body",children:u&&u.map((e,s)=>(0,a.jsxs)("div",{className:"py-3",children:[(0,a.jsx)("h6",{className:"text-primary fw-bold",children:function(e){let s=e.replace(/([A-Z])/g," $1");return s.charAt(0).toUpperCase()+s.slice(1)}(e.name)}),(0,a.jsxs)("div",{className:"form-check form-switch form-check-inline",children:[(0,a.jsx)("input",{className:"form-check-input",type:"checkbox",id:s+"view",defaultChecked:e.view,onChange:s=>updatePermission(e.name,"view",s.target)}),(0,a.jsx)("label",{className:"form-check-label",htmlFor:s+"view",children:p("View")})]}),(0,a.jsxs)("div",{className:"form-check form-switch form-check-inline",children:[(0,a.jsx)("input",{className:"form-check-input",type:"checkbox",id:s+"edit",defaultChecked:e.edit,onChange:s=>updatePermission(e.name,"edit",s.target)}),(0,a.jsx)("label",{className:"form-check-label",htmlFor:s+"edit",children:p("Edit")})]}),(0,a.jsxs)("div",{className:"form-check form-switch form-check-inline",children:[(0,a.jsx)("input",{className:"form-check-input",type:"checkbox",id:s+"delete",defaultChecked:e.delete,onChange:s=>updatePermission(e.name,"delete",s.target)}),(0,a.jsx)("label",{className:"form-check-label",htmlFor:s+"delete",children:p("Delete")})]})]},s))})]}),(0,a.jsx)("div",{className:"py-3",children:(0,a.jsx)(c.default,{text:p("UPDATE"),type:"submit",state:f})})]})}):null};EditStaff.requireAuthAdmin=!0,EditStaff.dashboard=!0,s.default=EditStaff},86425:function(e){e.exports={button:"button_button__8rPLr",svg:"button_svg__Um2Tk",spin:"button_spin__X5iRJ"}},31183:function(e){e.exports={container:"spinner_container__Ce8dH",spinner:"spinner_spinner__eipLJ",spin:"spinner_spin__LDwbh"}},69032:function(e){e.exports={body:"__403_body__otBK_",body_container:"__403_body_container__ZHJj1",ntfnd:"__403_ntfnd__oD8dB",error:"__403_error__qSaCL"}},11163:function(e,s,t){e.exports=t(59974)}},function(e){e.O(0,[7529,9734,1664,9774,2888,179],function(){return e(e.s=51536)}),_N_E=e.O()}]);