(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[6130],{65062:function(e,a,s){(window.__NEXT_P=window.__NEXT_P||[]).push(["/dashboard/settings",function(){return s(99309)}])},99309:function(e,a,s){"use strict";s.r(a);var r=s(85893),t=s(5152),l=s.n(t),n=s(67294),c=s(22120),o=s(25617),i=s(22920),d=s(59734),u=s(2022),m=s(67341);let h=l()(()=>s.e(8214).then(s.bind(s,18214)),{loadableGenerated:{webpack:()=>[18214]}}),p=l()(()=>Promise.all([s.e(7529),s.e(8188)]).then(s.bind(s,76606)),{loadableGenerated:{webpack:()=>[76606]}}),g=l()(()=>s.e(5651).then(s.bind(s,55651)).then(e=>e.HexColorInput),{loadableGenerated:{webpack:()=>[null]}}),b=l()(()=>s.e(5651).then(s.bind(s,55651)).then(e=>e.HexColorPicker),{loadableGenerated:{webpack:()=>[null]}}),SettingsPage=()=>{let{data:e,error:a}=(0,d.ZP)("/api/settings",u.gN),[s,t]=(0,n.useState)([]),[l,x]=(0,n.useState)(""),[f,y]=(0,n.useState)({}),[j,N]=(0,n.useState)("#000000"),[v,S]=(0,n.useState)("#000000"),[C,_]=(0,n.useState)("#000000"),[w,F]=(0,n.useState)("#000000"),{t:P}=(0,c.$G)();(0,n.useEffect)(()=>{e&&e.settings&&(t(e.settings),y(e.settings.currency),N(e.settings.color.primary),S(e.settings.color.primary_hover),_(e.settings.color.secondary),F(e.settings.color.body_gray))},[e]);let{session:k}=(0,o.v9)(e=>e.localSession),[A,E]=(0,n.useState)({});(0,n.useEffect)(()=>{E((0,u.wn)(k,"settings"))},[k]);let I=(0,n.useRef)(),q=(0,n.useRef)(),G=(0,n.useRef)(),R=(0,n.useRef)(),D=(0,n.useRef)(),getContrastYIQ=e=>{try{e=e.replace("#","");var a=parseInt(e.substr(0,2),16),s=parseInt(e.substr(2,2),16),r=parseInt(e.substr(4,2),16);return(299*a+587*s+114*r)/1e3>=160?"#333333":"#ffffff"}catch(e){return console.log(e),"#333333"}},handleForm=async e=>{e.preventDefault();try{x("loading");let e=JSON.stringify({primary:j,primary_hover:v,secondary:C,body_gray:w,body_gray_contrast:getContrastYIQ(w),primary_contrast:getContrastYIQ(j),primary_hover_contrast:getContrastYIQ(v),secondary_contrast:getContrastYIQ(C)}),a={name:I.current.value,title:q.current.value,currencyName:R.current.value,currencySymbol:R.current.selectedOptions[0].getAttribute("data-symbol"),exchangeRate:D.current.value,color:e,language:G.current.value},s=new FormData;for(let e in a)s.append(e,a[e].trim());let r=await (0,u.qC)("/api/settings?scope=general",s);r.success?i.toast.success("Setting Updated Successfully"):i.toast.error("Something Went Wrong (500)")}catch(e){i.toast.error("Something Went Wrong (".concat(e.message,")"))}x("")};return(0,r.jsx)(r.Fragment,{children:a?(0,r.jsx)("div",{className:"text-center text-danger",children:"failed to load"}):s._id?(0,r.jsx)(r.Fragment,{children:(0,r.jsxs)("form",{onSubmit:handleForm,children:[(0,r.jsxs)("div",{className:"card mb-5 border-0 shadow",children:[(0,r.jsx)("div",{className:"card-header bg-white py-3 fw-bold",children:P("General Settings")}),(0,r.jsxs)("div",{className:"card-body",children:[(0,r.jsxs)("div",{className:"py-3",children:[(0,r.jsxs)("label",{htmlFor:"inp-1",className:"form-label",children:[P("Application Name"),"*"]}),(0,r.jsx)("input",{type:"text",ref:I,defaultValue:s.name,id:"inp-1",className:"form-control",required:!0})]}),(0,r.jsxs)("div",{className:"py-3",children:[(0,r.jsxs)("label",{htmlFor:"inp-2",className:"form-label",children:[P("Home Page Title"),"*"]}),(0,r.jsx)("input",{type:"text",ref:q,defaultValue:s.title,id:"inp-2",className:"form-control",required:!0})]}),(0,r.jsxs)("div",{className:"py-3",children:[(0,r.jsxs)("label",{htmlFor:"inp-17",className:"form-label",children:[P("System Default Language"),"*"]}),(0,r.jsxs)("select",{id:"inp-17",ref:G,defaultValue:s.language,className:"form-control",required:!0,children:[(0,r.jsx)("option",{value:"en",children:"English"}),(0,r.jsx)("option",{value:"bn",children:"Bangla"}),(0,r.jsx)("option",{value:"ar",children:"Arabic"}),(0,r.jsx)("option",{value:"fr",children:"French"})]})]}),(0,r.jsxs)("div",{className:"py-3",children:[(0,r.jsxs)("label",{htmlFor:"inp-7",className:"form-label",children:[P("System Default Currency"),"*"]}),(0,r.jsx)("select",{id:"inp-7",ref:R,defaultValue:s.currency.name,onChange:()=>{let e={name:R.current.value,symbol:R.current.selectedOptions[0].getAttribute("data-symbol")};y(e)},className:"form-control",required:!0,children:m.Aq.map((e,a)=>(0,r.jsx)("option",{value:e.c,"data-symbol":e.s,children:"".concat(e.n," (").concat(e.s,")")},a))})]}),(0,r.jsxs)("div",{className:"py-3",children:[(0,r.jsxs)("label",{htmlFor:"inp-4",className:"form-label",children:[P("Currency exchange rate")," ( 1 ",f.name," = ? USD )"]}),(0,r.jsx)("input",{type:"number",ref:D,defaultValue:s.currency.exchangeRate,id:"inp-4",step:".00000001",className:"form-control",required:!0})]})]})]}),(0,r.jsxs)("div",{className:"card mb-5 border-0 shadow",children:[(0,r.jsx)("div",{className:"card-header bg-white py-3 fw-bold",children:P("Appearance Settings")}),(0,r.jsx)("div",{className:"card-body",children:(0,r.jsxs)("div",{className:"app_set",children:[(0,r.jsxs)("div",{className:"py-3",children:[(0,r.jsx)("label",{htmlFor:"inp-5",className:"form-label",children:P("Primary Color")}),(0,r.jsx)(b,{color:j,onChange:N}),(0,r.jsx)("br",{}),(0,r.jsx)(g,{color:j,onChange:N})]}),(0,r.jsxs)("div",{className:"py-3",children:[(0,r.jsx)("label",{htmlFor:"inp-6",className:"form-label",children:P("Primary Hover Color")}),(0,r.jsx)(b,{color:v,onChange:S}),(0,r.jsx)("br",{}),(0,r.jsx)(g,{color:v,onChange:S})]}),(0,r.jsxs)("div",{className:"py-3",children:[(0,r.jsx)("label",{htmlFor:"inp-7",className:"form-label",children:P("Secondary Color")}),(0,r.jsx)(b,{color:C,onChange:_}),(0,r.jsx)("br",{}),(0,r.jsx)(g,{color:C,onChange:_})]}),(0,r.jsxs)("div",{className:"py-3",children:[(0,r.jsx)("label",{htmlFor:"inp-13",className:"form-label",children:P("Body Gray Color")}),(0,r.jsx)(b,{color:w,onChange:F}),(0,r.jsx)("br",{}),(0,r.jsx)(g,{color:w,onChange:F})]})]})})]}),A.edit&&(0,r.jsx)("div",{className:"py-3",children:(0,r.jsx)(p,{type:"submit",text:P("UPDATE"),state:l})})]})}):(0,r.jsx)(h,{})})};SettingsPage.requireAuthAdmin=!0,SettingsPage.dashboard=!0,a.default=SettingsPage}},function(e){e.O(0,[9734,9774,2888,179],function(){return e(e.s=65062)}),_N_E=e.O()}]);