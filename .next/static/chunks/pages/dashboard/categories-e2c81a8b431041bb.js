(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[436,9010],{63959:function(e,t,a){"use strict";a.d(t,{a:function(){return l}});var n=a(87462),r=a(67294),o=a(7529),l=r.forwardRef(function(e,t){return r.createElement(o.r,(0,n.Z)({iconAttrs:{fill:"currentColor",xmlns:"http://www.w3.org/2000/svg"},iconVerticalAlign:"middle",iconViewBox:"0 0 16 16"},e,{ref:t}),r.createElement("path",{d:"M2.5 8a5.5 5.5 0 0 1 8.25-4.764.5.5 0 0 0 .5-.866A6.5 6.5 0 1 0 14.5 8a.5.5 0 0 0-1 0 5.5 5.5 0 1 1-11 0z"}),r.createElement("path",{d:"M15.354 3.354a.5.5 0 0 0-.708-.708L8 9.293 5.354 6.646a.5.5 0 1 0-.708.708l3 3a.5.5 0 0 0 .708 0l7-7z"}))});l.displayName="Check2Circle"},40644:function(e,t,a){"use strict";a.d(t,{w:function(){return l}});var n=a(87462),r=a(67294),o=a(7529),l=r.forwardRef(function(e,t){return r.createElement(o.r,(0,n.Z)({iconAttrs:{fill:"currentColor",xmlns:"http://www.w3.org/2000/svg"},iconVerticalAlign:"middle",iconViewBox:"0 0 16 16"},e,{ref:t}),r.createElement("path",{d:"M15.502 1.94a.5.5 0 0 1 0 .706L14.459 3.69l-2-2L13.502.646a.5.5 0 0 1 .707 0l1.293 1.293zm-1.75 2.456-2-2L4.939 9.21a.5.5 0 0 0-.121.196l-.805 2.414a.25.25 0 0 0 .316.316l2.414-.805a.5.5 0 0 0 .196-.12l6.813-6.814z"}),r.createElement("path",{fillRule:"evenodd",d:"M1 13.5A1.5 1.5 0 0 0 2.5 15h11a1.5 1.5 0 0 0 1.5-1.5v-6a.5.5 0 0 0-1 0v6a.5.5 0 0 1-.5.5h-11a.5.5 0 0 1-.5-.5v-11a.5.5 0 0 1 .5-.5H9a.5.5 0 0 0 0-1H2.5A1.5 1.5 0 0 0 1 2.5v11z"}))});l.displayName="PencilSquare"},31835:function(e,t,a){"use strict";a.d(t,{K:function(){return l}});var n=a(87462),r=a(67294),o=a(7529),l=r.forwardRef(function(e,t){return r.createElement(o.r,(0,n.Z)({iconAttrs:{fill:"currentColor",xmlns:"http://www.w3.org/2000/svg"},iconVerticalAlign:"middle",iconViewBox:"0 0 16 16"},e,{ref:t}),r.createElement("path",{d:"M8 15A7 7 0 1 1 8 1a7 7 0 0 1 0 14zm0 1A8 8 0 1 0 8 0a8 8 0 0 0 0 16z"}),r.createElement("path",{d:"M11.354 4.646a.5.5 0 0 0-.708 0l-6 6a.5.5 0 0 0 .708.708l6-6a.5.5 0 0 0 0-.708z"}))});l.displayName="SlashCircle"},25137:function(e,t,a){"use strict";a.d(t,{r:function(){return l}});var n=a(87462),r=a(67294),o=a(7529),l=r.forwardRef(function(e,t){return r.createElement(o.r,(0,n.Z)({iconAttrs:{fill:"currentColor",xmlns:"http://www.w3.org/2000/svg"},iconVerticalAlign:"middle",iconViewBox:"0 0 16 16"},e,{ref:t}),r.createElement("path",{d:"M5.5 5.5A.5.5 0 0 1 6 6v6a.5.5 0 0 1-1 0V6a.5.5 0 0 1 .5-.5zm2.5 0a.5.5 0 0 1 .5.5v6a.5.5 0 0 1-1 0V6a.5.5 0 0 1 .5-.5zm3 .5a.5.5 0 0 0-1 0v6a.5.5 0 0 0 1 0V6z"}),r.createElement("path",{fillRule:"evenodd",d:"M14.5 3a1 1 0 0 1-1 1H13v9a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V4h-.5a1 1 0 0 1-1-1V2a1 1 0 0 1 1-1H6a1 1 0 0 1 1-1h2a1 1 0 0 1 1 1h3.5a1 1 0 0 1 1 1v1zM4.118 4 4 4.059V13a1 1 0 0 0 1 1h6a1 1 0 0 0 1-1V4.059L11.882 4H4.118zM2.5 3V2h11v1h-11z"}))});l.displayName="Trash"},26312:function(e,t,a){(window.__NEXT_P=window.__NEXT_P||[]).push(["/dashboard/categories",function(){return a(40539)}])},59010:function(e,t,a){"use strict";a.r(t),a.d(t,{default:function(){return ImageLoader}});var n=a(85893),r=a(25675),o=a.n(r),l=a(67294);function ImageLoader(e){let{src:t,alt:a,width:r,height:s,quality:c,className:i,style:d,id:u,mouseMove:h,mouseOut:m,click:g,priority:f}=e,[b,p]=(0,l.useState)(t),_="".concat("https://app.techplek.website","/images/placeholder.jpg");return(0,n.jsx)(o(),{src:b,alt:a||t||"",width:r||100,height:s||100,className:i||null,style:d||null,placeholder:r<40?"empty":"blur",blurDataURL:_,id:u||null,onMouseMove:h||null,onMouseOut:m||null,onClick:g||null,quality:c||null,priority:f||void 0,onLoadingComplete:e=>{0===e.naturalWidth&&p(_)},onError:()=>{p(_)}})}},40539:function(e,t,a){"use strict";a.r(t);var n=a(85893),r=a(63959),o=a(31835),l=a(25137),s=a(40644),c=a(5152),i=a.n(c),d=a(41664),u=a.n(d),h=a(67294),m=a(22120),g=a(25617),f=a(22920),b=a(59734),p=a(59010),_=a(71178),w=a.n(_),x=a(2022);let v=i()(()=>a.e(44).then(a.bind(a,90044)),{loadableGenerated:{webpack:()=>[90044]}}),y=i()(()=>a.e(6744).then(a.bind(a,36744)),{loadableGenerated:{webpack:()=>[36744]}}),C=i()(()=>Promise.all([a.e(3253),a.e(8505)]).then(a.bind(a,3347)),{loadableGenerated:{webpack:()=>[3347]}}),j=i()(()=>a.e(8214).then(a.bind(a,18214)),{loadableGenerated:{webpack:()=>[18214]}}),CategoryTable=()=>{let{data:e,error:t,mutate:a}=(0,b.ZP)("/api/categories",x.gN),[c,i]=(0,h.useState)([]),[d,_]=(0,h.useState)(!1),[E,N]=(0,h.useState)(""),{t:S}=(0,m.$G)();(0,h.useEffect)(()=>{e&&e.category&&i(e.category)},[e]);let{session:M}=(0,g.v9)(e=>e.localSession),[k,A]=(0,h.useState)({});(0,h.useEffect)(()=>{A((0,x.wn)(M,"category"))},[M]);let openModal=e=>{N(e),_(!0)},closeModal=()=>{_(!1)},deleteProduct=async()=>{_(!1),await (0,x.SR)("/api/categories?id=".concat(E)).then(e=>e.success?(f.toast.success("Category Deleted Successfully"),a()):f.toast.error("Something Went Wrong")).catch(e=>{console.log(e),f.toast.error("Something Went Wrong")})},changeTopCategory=async e=>{await (0,x.VA)("/api/categories/edit",{id:e}).then(e=>e.success?f.toast.success("Category Updated Successfully"):f.toast.error("Something Went Wrong")).catch(e=>{console.log(e),f.toast.error("Something Went Wrong")})},[V,z]=h.useState(""),[T,L]=h.useState(!1),H=c.filter(e=>e.name&&e.name.toLowerCase().includes(V.toLowerCase())),R=h.useMemo(()=>(0,n.jsx)(y,{onFilter:e=>z(e),onClear:()=>{V&&(L(!T),z(""))},filterText:V}),[V,T]),W=[{name:S("id"),selector:e=>e.categoryId},{name:S("name"),selector:e=>e.name,sortable:!0},{name:S("image"),selector:e=>{var t;return(0,n.jsx)(p.default,{src:null===(t=e.icon[0])||void 0===t?void 0:t.url,alt:e.name,width:50,height:50})}},{name:S("Top Category"),selector:e=>k.edit?(0,n.jsx)("div",{className:"form-check form-switch",children:(0,n.jsx)("input",{className:"form-check-input",type:"checkbox",onChange:()=>changeTopCategory(e._id),defaultChecked:e.topCategory})}):e.topCategory?(0,n.jsx)(r.a,{width:20,height:20}):(0,n.jsx)(o.K,{width:20,height:20})},{name:S("Subcategory Amount"),selector:e=>e.subCategories.length},{name:S("action"),selector:e=>(0,n.jsxs)("div",{children:[k.delete&&(0,n.jsx)("div",{className:w().button,onClick:()=>openModal(e._id),children:(0,n.jsx)(l.r,{width:22,height:22,title:"DELETE"})}),k.edit&&(0,n.jsx)(u(),{href:"/dashboard/categories/".concat(e._id),children:(0,n.jsx)("div",{className:w().button,children:(0,n.jsx)(s.w,{width:22,height:22,title:"EDIT"})})})]})}];return(0,n.jsxs)(n.Fragment,{children:[t?(0,n.jsx)("div",{className:"text-center text-danger",children:"failed to load"}):e?(0,n.jsx)("div",{className:w().container,children:(0,n.jsx)(v,{columns:W,data:H,pagination:!0,paginationResetDefaultPage:T,subHeader:!0,subHeaderComponent:R,persistTableHead:!0,customStyles:{rows:{style:{minHeight:"92px",fontSize:"15px"}},headCells:{style:{fontSize:"15px"}}}})}):(0,n.jsx)(j,{}),(0,n.jsx)(C,{isOpen:d,handleCloseModal:closeModal,small:!0,children:(0,n.jsxs)("div",{className:w().modal_icon,children:[(0,n.jsx)(l.r,{width:80,height:80}),(0,n.jsx)("p",{className:"mb-1",children:"Are you sure, you want to delete?"}),(0,n.jsx)("small",{className:"text-danger d-block mb-3",children:"This operation also deletes all subcategories related to this category"}),(0,n.jsxs)("div",{children:[(0,n.jsx)("button",{className:w().danger_button,onClick:()=>deleteProduct(),children:"Delete"}),(0,n.jsx)("button",{className:w().success_button,onClick:()=>closeModal(),children:"Cancel"})]})]})})]})};CategoryTable.requireAuthAdmin=!0,CategoryTable.dashboard=!0,t.default=CategoryTable},71178:function(e){e.exports={container:"table_container__f1mC4",button:"table_button__LF8_5",modal_icon:"table_modal_icon__t_aHR",danger_button:"table_danger_button__jpS_l",success_button:"table_success_button__lcGr5",color_viewer:"table_color_viewer__54oBu",search_bar:"table_search_bar__anNGy",search_bar_button:"table_search_bar_button__OjZ8a"}}},function(e){e.O(0,[7529,9734,1664,5675,9774,2888,179],function(){return e(e.s=26312)}),_N_E=e.O()}]);