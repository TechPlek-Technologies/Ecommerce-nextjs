(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[1060,9010,8214],{94504:function(e,t,s){"use strict";s.r(t);var a=s(85893),l=s(81058),r=s(25137),n=s(5121),i=s(67294),d=s(22920),o=s(59010),c=s(20053),u=s.n(c);t.default=e=>{let{label:t,updateFilesCb:s,maxFileSizeInBytes:c,preSelectedFiles:p,resetCb:h,...m}=e,x=(0,i.useRef)(null),[_,v]=(0,i.useState)(p||[]),[j,f]=(0,i.useState)("");(0,i.useEffect)(()=>{"reset"===h&&v([])},[h]);let addNewFilesLocal=async e=>{try{f("Uploading...");let t=new FormData;t.append("file",e);let s=await (0,n.default)({method:"post",url:"/api/fileupload/local",data:t,headers:{"Content-Type":"multipart/form-data"}}).then(e=>e.data);if(s.success)return f(""),{name:s.name,url:s.url};throw Error("Something Went Wrong "+s.err)}catch(e){f(e.message)}},callUpdateFilesCb=e=>{s(e)},handleNewFileUpload=async e=>{let{files:t}=e.target;if(t.length){if(t[0].size<=c){let e=await addNewFilesLocal(t[0]);e&&(m.multiple?(v([..._,e]),callUpdateFilesCb([..._,e])):(v([e]),callUpdateFilesCb([e])))}else d.toast.warning("File size is too large (Max 2mb)")}},removeFile=async e=>{try{f("Deleting...");let{success:t,err:s}=await (0,n.default)({method:"DELETE",url:"/api/fileupload/".concat("local","?name=").concat(e)}).then(e=>e.data);if(t){let t=_.filter(t=>t.name!==e);v(t),callUpdateFilesCb(t)}else d.toast.error(s)}catch(e){console.log(e),d.toast.error("Something Went Wrong - ".concat(e.message))}f("")};return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsxs)("div",{className:u().fileUploadContainer,children:[(0,a.jsx)("label",{className:u().inputLabel,children:t}),(0,a.jsx)("p",{className:u().dragDropText,children:"Drag and drop your files anywhere or"}),(0,a.jsxs)("button",{className:u().uploadFileBtn,type:"button",onClick:()=>{x.current.click()},children:[(0,a.jsx)("div",{children:(0,a.jsx)(l.g,{width:22,height:22})}),(0,a.jsxs)("span",{children:[" Upload ",m.multiple?"files":"a file"]})]}),(0,a.jsx)("input",{className:u().formField,type:"file",ref:x,onChange:handleNewFileUpload,title:"",value:"",...m})]}),j.length>0&&(0,a.jsx)("div",{className:"text-danger my-2",children:j}),(0,a.jsxs)("div",{className:u().filePreviewContainer,children:[(0,a.jsx)("span",{children:"To Upload"}),(0,a.jsx)("div",{className:u().previewList,children:_.map((e,t)=>(0,a.jsx)("div",{className:u().previewContainer,children:(0,a.jsxs)("div",{className:u().previewItem,children:[(0,a.jsx)(o.default,{className:u().imagePreview,src:e.url,alt:e.name,width:100,height:100}),(0,a.jsx)("aside",{children:(0,a.jsx)(r.r,{width:18,height:18,className:u().removeFileIcon,onClick:()=>removeFile(e.name)})})]})},e.name+t))})]})]})}},59010:function(e,t,s){"use strict";s.r(t),s.d(t,{default:function(){return ImageLoader}});var a=s(85893),l=s(25675),r=s.n(l),n=s(67294);function ImageLoader(e){let{src:t,alt:s,width:l,height:i,quality:d,className:o,style:c,id:u,mouseMove:p,mouseOut:h,click:m,priority:x}=e,[_,v]=(0,n.useState)(t),j="".concat("https://app.techplek.website","/images/placeholder.jpg");return(0,a.jsx)(r(),{src:_,alt:s||t||"",width:l||100,height:i||100,className:o||null,style:c||null,placeholder:l<40?"empty":"blur",blurDataURL:j,id:u||null,onMouseMove:p||null,onMouseOut:h||null,onClick:m||null,quality:d||null,priority:x||void 0,onLoadingComplete:e=>{0===e.naturalWidth&&v(j)},onError:()=>{v(j)}})}},71060:function(e,t,s){"use strict";s.r(t),s.d(t,{default:function(){return Profile_PurchaseHistory}});var a=s(85893),l=s(96553),r=s(67294),n=s(90044),i=s(25617),d=s(59734),o=s(71178),c=s.n(o),u=s(2022),p=s(36744),h=s(18214),m=s(22538),x=s(5152),_=s.n(x),v=s(22920),j=s(86418),f=s.n(j),b=s(76606),g=s(90862),y=s.n(g);function StarRating(e){let{rate:t}=e,[s,l]=(0,r.useState)(0),[n,i]=(0,r.useState)(0);return(0,a.jsx)("div",{className:y().star_rating,children:[void 0,void 0,void 0,void 0,void 0].map((e,r)=>(r+=1,(0,a.jsx)("button",{type:"button",className:r<=(n||s)?y().on:y().off,onClick:()=>{var e;l(e=r),t(e)},onMouseEnter:()=>i(r),onMouseLeave:()=>i(s),children:(0,a.jsx)("span",{className:"star",children:"â˜…"})},r)))})}var N=s(31454),w=s.n(N),C=s(22120),S=s(59010),F=s(94504);function RefundForm(e){var t,s,l,n,d,o,c,p,h,m;let{data:x,orderData:_,update:j,hide:f,close:g}=e,[y,N]=(0,r.useState)([]),[w,I]=(0,r.useState)(""),R=(0,i.v9)(e=>e.settings),k=R.settingsData.currency.symbol,D=(0,r.useRef)(null),{t:U}=(0,C.$G)(),P=(0,u.dA)(x.product.price*x.product.qty,x.product.vat||0),L=(0,u.dA)(x.product.price*x.product.qty,x.product.tax||0),q=+(x.product.price*x.product.qty+P+L).toFixed(2),T=+(0,u.dA)(x.product.price,(null===(t=_.coupon)||void 0===t?void 0:t.discount)||0).toFixed(2),M=+(q-T).toFixed(2);async function requestRefundHandle(e){try{var t,s,a,l;e.preventDefault(),I("loading");let r={product:{id:x.product._id,name:x.product.name,color:(null===(s=x.product)||void 0===s?void 0:null===(t=s.color)||void 0===t?void 0:t.name)||null,attribute:(null===(l=x.product)||void 0===l?void 0:null===(a=l.attribute)||void 0===a?void 0:a.name)||null,price:x.product.price,qty:x.product.qty,vat:x.product.vat,tax:x.product.tax},refundReason:D.current.value.trim(),status:"Pending",attachments:y,refundAmount:M,orderId:x.oid},n=await (0,u.qC)("/api/refund",r);n.success?(v.toast.success("Refund Request Successful please wait for the response"),j(),f(),g()):v.toast.error("Something Went Wrong 500")}catch(e){console.log(e),v.toast.error("Something Went Wrong - ".concat(e.message))}I("")}return(0,a.jsxs)("form",{className:"p-2",onSubmit:requestRefundHandle,children:[(0,a.jsx)("div",{className:"card mt-2",children:(0,a.jsx)("div",{className:"card-body",children:(0,a.jsxs)("div",{className:"row",children:[(0,a.jsx)("div",{className:"col-3 col-sm-2",children:(0,a.jsx)(S.default,{src:null===(s=x.product.image[0])||void 0===s?void 0:s.url})}),(0,a.jsxs)("div",{className:"col-9 col-sm-7 text-left",children:[(0,a.jsx)("p",{children:x.product.name}),(0,a.jsxs)("span",{children:[U("Variant"),":"]}),(null===(n=x.product)||void 0===n?void 0:null===(l=n.color)||void 0===l?void 0:l.name)&&(0,a.jsx)("span",{children:null===(o=x.product)||void 0===o?void 0:null===(d=o.color)||void 0===d?void 0:d.name}),(null===(p=x.product)||void 0===p?void 0:null===(c=p.attribute)||void 0===c?void 0:c.name)&&(0,a.jsx)("span",{children:null===(m=x.product)||void 0===m?void 0:null===(h=m.attribute)||void 0===h?void 0:h.name})]}),(0,a.jsxs)("div",{className:"col-4 col-sm-3 text-left d-flex flex-column pl-0 mt-2 mt-sm-0 pl-sm-5",children:[(0,a.jsxs)("span",{children:["QTY : ",x.product.qty]}),(0,a.jsxs)("span",{children:["Price :",k,x.product.price]}),(0,a.jsxs)("span",{children:["Tax :",k,(0,u.rQ)(x.product.tax)]}),(0,a.jsxs)("span",{children:["Vat :",k,(0,u.rQ)(x.product.vat)]})]})]})})}),(0,a.jsx)("div",{className:"card mt-3",children:(0,a.jsx)("div",{className:"card-body",children:(0,a.jsxs)("div",{className:"row text-center",children:[(0,a.jsxs)("span",{className:"col-sm-2",children:["Subtotal :",k,q]}),(0,a.jsxs)("span",{className:"col-sm-5",children:["Coupon discount :",k,T]}),(0,a.jsxs)("span",{className:"col-sm-5",children:["Total refund amount :",k,M]})]})})}),(0,a.jsxs)("div",{className:"my-3",children:[(0,a.jsx)("label",{className:"form-label",children:U("Refund reason")}),(0,a.jsx)("textarea",{className:"form-control",required:!0,ref:D})]}),(0,a.jsx)("div",{className:"my-5",children:(0,a.jsx)(F.default,{label:U("Attachments"),multiple:!0,updateFilesCb:N,maxFileSizeInBytes:2e6,accept:".jpg,.png,.jpeg"})}),(0,a.jsx)(b.default,{text:"Submit",state:w,type:"submit"})]})}function PurchaseDetails(e){var t;let{data:l,hide:n,update:d}=e,o=_()(()=>Promise.all([s.e(3253),s.e(6590)]).then(s.bind(s,3347)),{loadableGenerated:{webpack:()=>[3347]}}),[c,p]=(0,r.useState)(!1),[h,x]=(0,r.useState)({id:null,name:null,oid:null}),[j,g]=(0,r.useState)({product:{},oid:null}),{t:y}=(0,C.$G)(),N=(0,i.v9)(e=>e.settings),S=N.settingsData.currency.symbol,decimalBalance=e=>Math.round(10*e)/10,product_review=(e,t,s)=>{x({id:e,name:t,oid:s}),p(!0)},closeModal=()=>{p(!1)};return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsxs)("div",{className:"".concat(w().card," border-0 shadow"),children:[(0,a.jsx)("div",{className:w().close,onClick:n,children:(0,a.jsx)(m.y,{width:17,height:17})}),(0,a.jsxs)("div",{className:"card border-0",children:[(0,a.jsx)("div",{className:"card-header bg-white py-3 fw-bold",children:y("order_details")}),(0,a.jsx)("div",{className:"card-body",children:(0,a.jsxs)("div",{className:f().body,children:[(0,a.jsxs)("div",{className:"".concat(f().order_details," row"),children:[(0,a.jsxs)("div",{className:"col-md-6",children:[(0,a.jsxs)("h6",{children:[y("order_details")," :"]}),(0,a.jsxs)("p",{children:[y("order_id"),": ",(0,a.jsx)("span",{children:l.orderId})]}),(0,a.jsxs)("p",{children:[y("order_date")," :"," ",(0,a.jsx)("span",{children:(0,u.vc)(l.orderDate)})]}),(0,a.jsxs)("p",{children:[y("payment_status")," :"," ","Unpaid"===l.paymentStatus?(0,a.jsx)("span",{className:"badge bg-danger",children:"Unpaid"}):(0,a.jsx)("span",{className:"badge bg-success",children:"Paid"})]}),(0,a.jsxs)("p",{children:[y("order_status"),":"," ",(0,a.jsx)("span",{className:"badge bg-primary",children:l.status})]}),(0,a.jsxs)("p",{children:[y("payment_method"),": ",(0,a.jsx)("span",{children:l.paymentMethod})]})]}),(0,a.jsxs)("div",{className:"col-md-6",children:[(0,a.jsxs)("h6",{children:[y("delivery_information")," :"]}),(0,a.jsxs)("p",{children:[y("delivery_type"),": ",(0,a.jsx)("span",{children:l.deliveryInfo.type})]}),l.deliveryInfo.area&&(0,a.jsxs)("p",{children:[y("delivery_area"),":"," ",(0,a.jsx)("span",{children:l.deliveryInfo.area})]}),(0,a.jsxs)("p",{children:[y("delivery_cost")," :"," ",(0,a.jsx)("span",{children:S+l.deliveryInfo.cost})]})]})]}),(0,a.jsx)("div",{className:"table-responsive",children:(0,a.jsxs)("table",{className:"table table-bordered",children:[(0,a.jsx)("thead",{children:(0,a.jsxs)("tr",{children:[(0,a.jsx)("th",{scope:"col",children:"#"}),(0,a.jsx)("th",{scope:"col",children:y("products")}),(0,a.jsx)("th",{scope:"col",children:y("quantity")}),(0,a.jsx)("th",{scope:"col",children:y("price")}),(0,a.jsx)("th",{scope:"col",children:y("review")})]})}),(0,a.jsx)("tbody",{children:l.products.map((e,t)=>(0,a.jsxs)("tr",{children:[(0,a.jsx)("th",{scope:"row",children:t+1}),(0,a.jsx)("td",{children:e.name}),(0,a.jsx)("td",{children:e.qty}),(0,a.jsx)("td",{children:S+e.price}),(0,a.jsx)("td",{children:"Delivered"===l.status?(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)("button",{className:w().review_button,onClick:()=>product_review(e._id,e.name,l.orderId),disabled:!!e.review,children:e.review?"reviewed":"Review"}),(0,a.jsx)("button",{className:w().review_button,onClick:()=>g({product:e,oid:l.orderId}),disabled:!!e.refundRequest,children:e.refundRequest?"Refund requested":"Refund request"})]}):"Not Delivered Yet"})]},t+e._id))})]})}),(0,a.jsxs)("div",{className:f().payment_info,children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("span",{children:y("sub_total")}),(0,a.jsx)("span",{children:S+l.totalPrice})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("span",{children:y("discount")}),(0,a.jsx)("span",{children:S+decimalBalance((0,u.dA)(l.totalPrice,(null===(t=l.coupon)||void 0===t?void 0:t.discount)||0))})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("span",{children:y("delivery_charge")}),(0,a.jsx)("span",{children:S+l.deliveryInfo.cost})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("span",{children:y("vat")}),(0,a.jsxs)("span",{children:[S,decimalBalance(l.vat)]})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("span",{children:y("tax")}),(0,a.jsxs)("span",{children:[S,decimalBalance(l.tax)]})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("span",{children:y("total")}),(0,a.jsx)("span",{children:S+l.payAmount})]})]})]})})]})]}),(0,a.jsx)(o,{isOpen:c,handleCloseModal:closeModal,small:!0,children:(0,a.jsx)(function(e){let{data:t}=e,[s,l]=(0,r.useState)(""),[i,o]=(0,r.useState)(1),c=(0,r.useRef)();async function postReview(e){try{e.preventDefault(),l("loading");let s={pid:t.id,oid:t.oid,rating:i,comment:c.current.value.trim()},a=await (0,u.qC)("/api/review",s);a.success?(v.toast.success("Review Added Successfully"),n(),closeModal(),d()):v.toast.error("Something Went Wrong 500")}catch(e){console.log(e),v.toast.error("Something Went Wrong - ".concat(e.message))}l("")}return(0,a.jsxs)("form",{onSubmit:postReview,children:[(0,a.jsxs)("div",{className:"mb-3",children:[(0,a.jsx)("label",{className:"form-label",children:"Product"}),(0,a.jsx)("p",{children:t.name})]}),(0,a.jsxs)("div",{className:"mb-3",children:[(0,a.jsx)("label",{className:"form-label",children:"Rating"}),(0,a.jsx)(StarRating,{rate:o})]}),(0,a.jsxs)("div",{className:"mb-3",children:[(0,a.jsx)("label",{className:"form-label",children:"Comment"}),(0,a.jsx)("textarea",{className:"form-control",ref:c,required:!0})]}),(0,a.jsx)(b.default,{text:"Submit Review",state:s,type:"submit"})]})},{data:h})}),(0,a.jsx)(o,{isOpen:!!j.oid,handleCloseModal:()=>g({product:{},oid:null}),children:(0,a.jsx)(RefundForm,{data:j,orderData:l,update:d,hide:n,close:()=>g({product:{},oid:null})})})]})}var Profile_PurchaseHistory=e=>{let t="/api/profile?id=".concat(e.id,"&scope=orders"),{data:s,error:o,mutate:m}=(0,d.ZP)(e.id?t:null,u.gN),[x,_]=(0,r.useState)([]),v=(0,i.v9)(e=>e.settings),{t:j}=(0,C.$G)();(0,r.useEffect)(()=>{s&&s.user&&_(s.user.orders)},[s]);let[f,b]=(0,r.useState)(!1),[g,y]=(0,r.useState)(null),[N,w]=(0,r.useState)(""),[S,F]=(0,r.useState)(!1),I=x.filter(e=>e.orderId&&e.orderId.toLowerCase().includes(N.toLowerCase())),R=(0,r.useMemo)(()=>(0,a.jsx)(p.default,{onFilter:e=>w(e),onClear:()=>{N&&(F(!S),w(""))},filterText:N,placeholder:"Tracking Number"}),[N,S]),k=[{name:j("tracking_number"),selector:e=>e.orderId,grow:1.5},{name:j("date"),selector:e=>(0,u.vc)(e.orderDate),sortable:!0},{name:j("amount"),selector:e=>v.settingsData.currency.symbol+e.payAmount},{name:j("delivery_status"),selector:e=>e.status,sortable:!0},{name:j("payment_status"),selector:e=>e.paymentStatus,sortable:!0},{name:j("action"),selector:e=>(0,a.jsx)("div",{className:c().button,children:(0,a.jsx)(l.b,{width:20,height:20,title:"view",onClick:()=>(function(e){let t=x.find(t=>t.orderId===e);y(t),b(!0)})(e.orderId)})})}];return(0,a.jsx)(a.Fragment,{children:o?(0,a.jsx)("div",{className:"text-center text-danger",children:"failed to load"}):s?(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(n.default,{columns:k,data:I,pagination:!0,paginationResetDefaultPage:S,subHeader:!0,subHeaderComponent:R,persistTableHead:!0,customStyles:{rows:{style:{minHeight:"92px",fontSize:"15px"}},headCells:{style:{fontSize:"15px"}}}}),f&&g&&(0,a.jsx)(PurchaseDetails,{data:g,hide:function(){y(null),b(!1)},update:m})]}):(0,a.jsx)(h.default,{})})}},76606:function(e,t,s){"use strict";s.r(t);var a=s(85893),l=s(50263),r=s(67294),n=s(86425),i=s.n(n);t.default=e=>{let{text:t,type:s,state:n,clickEvent:d}=e,[o,c]=(0,r.useState)("");return(0,r.useEffect)(()=>{c(n)},[n]),(0,a.jsx)("button",{className:i().button,onClick:d,type:s||"button",children:(0,a.jsxs)("div",{children:[(0,a.jsxs)("span",{children:[t," "]}),"loading"===o&&(0,a.jsx)(l.z,{width:25,height:25,className:i().svg})]})})}},18214:function(e,t,s){"use strict";s.r(t);var a=s(85893),l=s(31183),r=s.n(l);t.default=e=>{let{color:t}=e;return(0,a.jsx)("div",{className:r().container,children:(0,a.jsx)("div",{className:r().spinner})})}},36744:function(e,t,s){"use strict";s.r(t);var a=s(85893),l=s(71178),r=s.n(l),n=s(67294),i=s(85976);t.default=e=>{let{filterText:t,onFilter:s,onClear:l,placeholder:d}=e,[o,c]=(0,n.useState)("");return(0,n.useEffect)(()=>{0===o.length&&l()},[o]),(0,a.jsxs)("div",{className:"d-flex",children:[(0,a.jsx)("input",{id:"search",type:"text",placeholder:"Filter By ".concat(d||"Name"),"aria-label":"Search Input",className:r().search_bar,value:o,onChange:e=>c(e.target.value),onKeyDown:function(e){"Enter"===e.key&&s(o)}}),t&&t.length>0?(0,a.jsx)("button",{type:"button",className:r().search_bar_button,onClick:()=>{c(""),l()},children:"X"}):(0,a.jsx)("button",{type:"button",className:r().search_bar_button,onClick:function(){s(o)},children:(0,a.jsx)(i.o,{width:15,height:15})})]})}},20053:function(e){e.exports={fileUploadContainer:"fileUpload_fileUploadContainer___BSo_",inputLabel:"fileUpload_inputLabel__i7LfU",dragDropText:"fileUpload_dragDropText__yaae1",uploadFileBtn:"fileUpload_uploadFileBtn__3Pcgs",formField:"fileUpload_formField__bJMTx",filePreviewContainer:"fileUpload_filePreviewContainer__t_9ez",previewList:"fileUpload_previewList__IRASR",previewContainer:"fileUpload_previewContainer__59vD4",previewItem:"fileUpload_previewItem__cRikd",imagePreview:"fileUpload_imagePreview__g3evF",removeFileIcon:"fileUpload_removeFileIcon__gAH7O"}},31454:function(e){e.exports={card:"purchaseDetails_card__3OJXZ",close:"purchaseDetails_close__DVuQ7",review_button:"purchaseDetails_review_button___ocbt"}},86425:function(e){e.exports={button:"button_button__8rPLr",svg:"button_svg__Um2Tk",spin:"button_spin__X5iRJ"}},90862:function(e){e.exports={star_rating:"ratingInput_star_rating__eT6ua",on:"ratingInput_on__L1rQk",off:"ratingInput_off__4TZPs"}},31183:function(e){e.exports={container:"spinner_container__Ce8dH",spinner:"spinner_spinner__eipLJ",spin:"spinner_spin__LDwbh"}},71178:function(e){e.exports={container:"table_container__f1mC4",button:"table_button__LF8_5",modal_icon:"table_modal_icon__t_aHR",danger_button:"table_danger_button__jpS_l",success_button:"table_success_button__lcGr5",color_viewer:"table_color_viewer__54oBu",search_bar:"table_search_bar__anNGy",search_bar_button:"table_search_bar_button__OjZ8a"}},86418:function(e){e.exports={top:"orderTrack_top__0tQv3",input:"orderTrack_input__Iewgj",body:"orderTrack_body__fbLiK",order_details:"orderTrack_order_details__I1bOq",payment_info:"orderTrack_payment_info__rK_3Q"}}}]);